(function(w){function t(a,c){function d(){}d.prototype=a;var b=new d,e;for(e in c)b[e]=c[e];c.toString!==Object.prototype.toString&&(b.toString=c.toString);return b}function n(a,c){if(null==c)return null;null==c.__id__&&(c.__id__=u++);var d;null==a.hx__closures__?a.hx__closures__={}:d=a.hx__closures__[c.__id__];null==d&&(d=function(){return d.method.apply(d.scope,arguments)},d.scope=a,d.method=c,a.hx__closures__[c.__id__]=d);return d}var b=function(){};b.__name__=!0;b.activate=function(a){b.disposables=
new v;b.view=new h;b.enabled=null!=a?a.enabled:!0;b.enabled?b.enable():b.disable()};b.enable=function(){b.enabled=!0;null!=b.commandEnable&&b.commandEnable.dispose();b.disposables.add(b.commandDisable=atom.commands.add("atom-workspace","clock:hide",function(a){b.disable()}));b.timer=new q(1E3);b.timer.run=b.update;b.view.show();b.view.setTime(new Date)};b.disable=function(){b.enabled=!1;null!=b.timer&&(b.timer.stop(),b.timer=null);null!=b.commandDisable&&b.commandDisable.dispose();b.disposables.add(b.commandEnable=
atom.commands.add("atom-workspace","clock:show",function(a){b.enable()}));b.view.hide()};b.serialize=function(){return{enabled:b.enabled}};b.deactivate=function(){null!=b.timer&&(b.timer.stop(),b.timer=null);b.view.destroy();b.disposables.dispose()};b.update=function(){b.view.setTime(new Date)};b.consumeStatusBar=function(a){a.addRightTile({item:b.view.element,priority:-100})};var l=function(){this.element=window.document.createElement("div");this.element.classList.add("status-bar-clock","inline-block");
this.element.style.display="inline-block";this.configChangeListener=atom.config.onDidChange("clock",{},n(this,this.handleConfigChange))};l.__name__=!0;l.prototype={show:function(){this.element.style.display="inline-block"},hide:function(){this.element.style.display="none"},destroy:function(){this.configChangeListener.dispose();this.element.remove()},setTime:function(a){},handleConfigChange:function(a){}};var f=function(){};f.__name__=!0;f.__format_get=function(a,c){switch(c){case "%":return"%";case "C":return g.lpad(e.string(e["int"](a.getFullYear()/
100)),"0",2);case "d":return g.lpad(e.string(a.getDate()),"0",2);case "D":return f.__format(a,"%m/%d/%y");case "e":return e.string(a.getDate());case "F":return f.__format(a,"%Y-%m-%d");case "H":case "k":return g.lpad(e.string(a.getHours()),"H"==c?"0":" ",2);case "I":case "l":var d=a.getHours()%12;return g.lpad(e.string(0==d?12:d),"I"==c?"0":" ",2);case "m":return g.lpad(e.string(a.getMonth()+1),"0",2);case "M":return g.lpad(e.string(a.getMinutes()),"0",2);case "n":return"\n";case "p":return 11<a.getHours()?
"PM":"AM";case "r":return f.__format(a,"%I:%M:%S %p");case "R":return f.__format(a,"%H:%M");case "s":return e.string(e["int"](a.getTime()/1E3));case "S":return g.lpad(e.string(a.getSeconds()),"0",2);case "t":return"\t";case "T":return f.__format(a,"%H:%M:%S");case "u":return d=a.getDay(),0==d?"7":null==d?"null":""+d;case "w":return e.string(a.getDay());case "y":return g.lpad(e.string(a.getFullYear()%100),"0",2);case "Y":return e.string(a.getFullYear());default:throw new m("Date.format %"+c+"- not implemented yet.");
}};f.__format=function(a,c){for(var d=new r,b=0;;){var e=c.indexOf("%",b);if(0>e)break;d.addSub(c,b,e-b);d.add(f.__format_get(a,p.substr(c,e+1,1)));b=e+2}d.addSub(c,b,c.length-b);return d.b};f.format=function(a,c){return f.__format(a,c)};var h=function(){l.call(this);this.showSeconds=atom.config.get("clock.seconds");this.format24=atom.config.get("clock.format");this.amPmSuffix=atom.config.get("clock.am_pm_suffix");this.setShowIcon(atom.config.get("clock.icon"));this.element.addEventListener("mouseover",
n(this,this.handleMouseOver),!1);this.element.addEventListener("mouseout",n(this,this.handleMouseOut),!1);this.contextMenu=atom.contextMenu.add({".status-bar-clock":[{label:"Hide",command:"clock:hide"}]})};h.__name__=!0;h.formatTimePart=function(a){return 10>a?"0"+a:null==a?"null":""+a};h.__super__=l;h.prototype=t(l.prototype,{destroy:function(){l.prototype.destroy.call(this);this.element.removeEventListener("mouseover",n(this,this.handleMouseOver));this.element.removeEventListener("mouseout",n(this,
this.handleMouseOut));null!=this.tooltip&&this.tooltip.dispose();this.contextMenu.dispose()},setTime:function(a){var c=a.getHours();!this.format24&&12<c&&(c-=12);c=h.formatTimePart(c)+":"+h.formatTimePart(a.getMinutes());this.showSeconds&&(c+=":"+h.formatTimePart(a.getSeconds()));!this.format24&&this.amPmSuffix&&(c=12<a.getHours()?c+" PM":c+" AM");this.element.textContent=c},handleConfigChange:function(a){a=a.newValue;this.showSeconds=a.seconds;this.format24=a.format;this.amPmSuffix=a.am_pm_suffix;
this.setShowIcon(a.icon);b.enabled&&this.setTime(new Date)},setShowIcon:function(a){a?this.element.classList.add("icon-clock"):this.element.classList.remove("icon-clock")},handleMouseOver:function(a){null!=this.tooltip&&this.tooltip.dispose();a=f.format(new Date,"%F");this.tooltip=atom.tooltips.add(this.element,{title:"<div>"+a+"</div>",delay:200,html:!0})},handleMouseOut:function(a){this.tooltip.dispose()}});var p=function(){};p.__name__=!0;p.substr=function(a,c,d){if(null!=c&&0!=c&&null!=d&&0>d)return"";
null==d&&(d=a.length);0>c?(c=a.length+c,0>c&&(c=0)):0>d&&(d=a.length+d-c);return a.substr(c,d)};Math.__name__=!0;var e=function(){};e.__name__=!0;e.string=function(a){return k.__string_rec(a,"")};e["int"]=function(a){return a|0};var r=function(){this.b=""};r.__name__=!0;r.prototype={add:function(a){this.b+=e.string(a)},addSub:function(a,c,d){this.b=null==d?this.b+p.substr(a,c,null):this.b+p.substr(a,c,d)}};var g=function(){};g.__name__=!0;g.lpad=function(a,c,d){if(0>=c.length)return a;for(;a.length<
d;)a=c+a;return a};var v=require("atom").CompositeDisposable,q=function(a){var c=this;this.id=setInterval(function(){c.run()},a)};q.__name__=!0;q.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){}};var m=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,m)};m.__name__=!0;m.__super__=Error;m.prototype=t(Error.prototype,{});var k=function(){};k.__name__=!0;k.__string_rec=function(a,c){if(null==
a)return"null";if(5<=c.length)return"<...>";var d=typeof a;"function"==d&&(a.__name__||a.__ename__)&&(d="object");switch(d){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];d=a[0]+"(";c+="\t";for(var b=2,e=a.length;b<e;)var f=b++,d=2!=f?d+(","+k.__string_rec(a[f],c)):d+k.__string_rec(a[f],c);return d+")"}d=a.length;b="[";c+="\t";for(e=0;e<d;)f=e++,b+=(0<f?",":"")+k.__string_rec(a[f],c);return b+"]"}try{b=a.toString}catch(g){return g instanceof m&&(g=g.val),"???"}if(null!=
b&&b!=Object.toString&&"function"==typeof b&&(d=a.toString(),"[object Object]"!=d))return d;d=null;b="{\n";c+="\t";e=null!=a.hasOwnProperty;for(d in a)e&&!a.hasOwnProperty(d)||"prototype"==d||"__class__"==d||"__super__"==d||"__interfaces__"==d||"__properties__"==d||(2!=b.length&&(b+=", \n"),b+=c+d+" : "+k.__string_rec(a[d],c));c=c.substring(1);return b+("\n"+c+"}");case "function":return"<function>";case "string":return a;default:return String(a)}};var u=0;module.exports=b;String.__name__=!0;Array.__name__=
!0;Date.__name__=["Date"];b.config={seconds:{title:"Show seconds",type:"boolean",description:"Toggle show seconds","default":!1},format:{title:"24-hour format",type:"boolean",description:"Toggle 12/24 time display format","default":!0},am_pm_suffix:{title:"AM/PM suffix",type:"boolean",description:"Show AM/PM suffix when 12-hour format is selected","default":!1},icon:{title:"Show icon",type:"boolean",description:"Show a clock icon","default":!1}}})("undefined"!=typeof console?console:{log:function(){}});
