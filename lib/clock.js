(function(p){function f(c,a){if(null==a)return null;null==a.__id__&&(a.__id__=m++);var d;null==c.hx__closures__?c.hx__closures__={}:d=c.hx__closures__[a.__id__];null==d&&(d=function(){return d.method.apply(d.scope,arguments)},d.scope=c,d.method=a,c.hx__closures__[a.__id__]=d);return d}var a=function(){};a.activate=function(c){a.disposables=new n;a.view=new e;a.enabled=null!=c?c.enabled:!0;a.enabled?a.enable():a.disable()};a.enable=function(){a.enabled=!0;null!=a.commandEnable&&a.commandEnable.dispose();
a.disposables.add(a.commandDisable=atom.commands.add("atom-workspace","clock:hide",function(c){a.disable()}));a.timer=new k(1E3);a.timer.run=a.update;a.view.show();a.view.setTime(new Date)};a.disable=function(){a.enabled=!1;null!=a.timer&&(a.timer.stop(),a.timer=null);null!=a.commandDisable&&a.commandDisable.dispose();a.disposables.add(a.commandEnable=atom.commands.add("atom-workspace","clock:show",function(c){a.enable()}));a.view.hide()};a.serialize=function(){return{enabled:a.enabled}};a.deactivate=
function(){null!=a.timer&&(a.timer.stop(),a.timer=null);a.view.destroy();a.disposables.dispose()};a.update=function(){a.view.setTime(new Date)};a.consumeStatusBar=function(c){c.addRightTile({item:a.view.element,priority:-100})};var h=function(){this.element=window.document.createElement("div");this.element.classList.add("status-bar-clock","inline-block");this.element.style.display="inline-block";this.configChangeListener=atom.config.onDidChange("clock",{},f(this,this.handleConfigChange))};h.prototype=
{show:function(){this.element.style.display="inline-block"},hide:function(){this.element.style.display="none"},destroy:function(){this.configChangeListener.dispose();this.element.remove()},setTime:function(a){},handleConfigChange:function(a){}};var e=function(){h.call(this);this.showSeconds=atom.config.get("clock.seconds");this.format24=atom.config.get("clock.format");this.amPmSuffix=atom.config.get("clock.am_pm_suffix");this.setShowIcon(atom.config.get("clock.icon"));this.element.addEventListener("mouseover",
f(this,this.handleMouseOver),!1);this.element.addEventListener("mouseout",f(this,this.handleMouseOut),!1);this.contextMenu=atom.contextMenu.add({".status-bar-clock":[{label:"Hide",command:"clock:hide"}]})};e.formatTimePart=function(a){return 10>a?"0"+a:null==a?"null":""+a};e.__super__=h;e.prototype=function(a,b){function d(){}d.prototype=a;var e=new d,g;for(g in b)e[g]=b[g];b.toString!==Object.prototype.toString&&(e.toString=b.toString);return e}(h.prototype,{destroy:function(){h.prototype.destroy.call(this);
this.element.removeEventListener("mouseover",f(this,this.handleMouseOver));this.element.removeEventListener("mouseout",f(this,this.handleMouseOut));null!=this.tooltip&&this.tooltip.dispose();this.contextMenu.dispose()},setTime:function(a){var b=a.getHours();!this.format24&&12<b&&(b-=12);b=e.formatTimePart(b)+":"+e.formatTimePart(a.getMinutes());this.showSeconds&&(b+=":"+e.formatTimePart(a.getSeconds()));!this.format24&&this.amPmSuffix&&(b=12<a.getHours()?b+" PM":b+" AM");this.element.textContent=
b},handleConfigChange:function(c){c=c.newValue;this.showSeconds=c.seconds;this.format24=c.format;this.amPmSuffix=c.am_pm_suffix;this.setShowIcon(c.icon);a.enabled&&this.setTime(new Date)},setShowIcon:function(a){a?this.element.classList.add("icon-clock"):this.element.classList.remove("icon-clock")},handleMouseOver:function(a){null!=this.tooltip&&this.tooltip.dispose();a=l.dateStr(new Date);this.tooltip=atom.tooltips.add(this.element,{title:"<div>"+a+"</div>",delay:250,html:!0})},handleMouseOut:function(a){this.tooltip.dispose()}});
var l=function(){};l.dateStr=function(a){var b=a.getMonth()+1,d=a.getDate(),e=a.getHours(),g=a.getMinutes(),f=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>d?"0"+d:""+d)+" "+(10>e?"0"+e:""+e)+":"+(10>g?"0"+g:""+g)+":"+(10>f?"0"+f:""+f)};var n=require("atom").CompositeDisposable,k=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};k.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){}};var m=0;module.exports=a;a.config=
{seconds:{title:"Show seconds",type:"boolean",description:"Toggle show seconds","default":!1},format:{title:"24-hour format",type:"boolean",description:"Toggle 12/24 time display format","default":!0},am_pm_suffix:{title:"AM/PM suffix",type:"boolean",description:"Show AM/PM suffix when 12-hour format is selected","default":!1},icon:{title:"Show icon",type:"boolean",description:"Show a clock icon","default":!1}}})("undefined"!=typeof console?console:{log:function(){}});
